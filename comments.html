<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Share your thoughts about Kystar and Snickers' love story">
    <meta name="theme-color" content="#d935f0">
    <title>K+S â€¢ Comments</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="css/styles.css" as="style">
    <link rel="preload" href="video/video.mp4" as="video" type="video/mp4">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’•</text></svg>">
</head>

<body>
    <!-- Background Video -->
    <video id="bg-video" autoplay loop muted playsinline>
        <source src="video/video.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Header -->
        <header>
            <h1 id="typewriter">talk to us</h1>
            <nav class="nav-buttons" role="navigation" aria-label="Main navigation">
                <button onclick="location.href='index.html'" aria-label="Go to homepage">
                    home
                </button>
                <button onclick="location.href='timeline.html'" aria-label="View our timeline">
                    timeline
                </button>
            </nav>
        </header>

        <!-- Comments Section -->
        <section class="comments-section" role="main" aria-label="Comments section">
            <h2>Share Your Thoughts</h2>
            
            <form id="comment-form" role="form" aria-label="Add a comment">
                <div class="form-group">
                    <label for="username-input" class="form-label">Your Name</label>
                    <input 
                        type="text" 
                        id="username-input" 
                        name="username"
                        placeholder="Enter your name (2-50 characters)"
                        minlength="2"
                        maxlength="50"
                        pattern="[a-zA-Z0-9\s]+"
                        title="Only letters, numbers, and spaces allowed"
                        aria-describedby="username-help"
                        required>
                    <div id="username-help" class="form-help">
                        Use only letters, numbers, and spaces
                    </div>
                    <div class="validation-message" id="username-error"></div>
                </div>

                <div class="form-group">
                    <label for="comment-input" class="form-label">Your Comment</label>
                    <textarea 
                        id="comment-input" 
                        name="comment_text"
                        placeholder="Share your thoughts about our story... (10-500 characters)"
                        minlength="10"
                        maxlength="500"
                        aria-describedby="comment-help"
                        required>
                    </textarea>
                    <div id="comment-help" class="form-help">
                        <span class="char-count">0/500 characters</span>
                    </div>
                    <div class="validation-message" id="comment-error"></div>
                </div>

                <button type="submit" class="submit-btn" aria-label="Submit your comment">
                    <span class="btn-text">Submit Comment</span>
                    <span class="btn-loading" style="display: none;">
                        <span class="spinner"></span>
                        Submitting...
                    </span>
                </button>
            </form>
            
            <div class="comments-container" role="log" aria-label="Comments list" aria-live="polite">
                <div class="comments-header">
                    <h3>Comments <span class="comment-count">(0)</span></h3>
                </div>
                <div class="comments-list">
                    <!-- Comments will be dynamically inserted here -->
                </div>
                <div class="loading-indicator" style="display: none;">
                    <div class="spinner"></div>
                    <span>Loading more comments...</span>
                </div>
                <div class="no-more-comments" style="display: none;">
                    <p>No more comments to load</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Volume Control -->
    <aside class="volume-container" aria-label="Video volume controls">
        <div class="volume-controls">
            <button class="volume-icon" id="mute-icon" aria-label="Mute video" type="button">
                ðŸ”‡
            </button>
            <div class="slider-container" role="slider" aria-label="Volume slider">
                <div class="slider-track"></div>
                <div class="slider-fill"></div>
                <div class="slider-thumb"></div>
                <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.5" 
                       aria-label="Adjust video volume">
            </div>
            <button class="volume-icon" id="max-volume-icon" aria-label="Maximum volume" type="button">
                ðŸ”Š
            </button>
        </div>
    </aside>

    <!-- Toast Notifications -->
    <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

    <!-- Screen reader only styles -->
    <style>
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .keyboard-navigation button:focus-visible,
        .keyboard-navigation .milestone:focus-visible,
        .keyboard-navigation textarea:focus-visible,
        .keyboard-navigation input:focus-visible {
            outline: 3px solid var(--primary-400);
            outline-offset: 2px;
        }
    </style>

    <!-- Scripts -->
    <script src="js/scripts.js"></script>
</body>

</html>